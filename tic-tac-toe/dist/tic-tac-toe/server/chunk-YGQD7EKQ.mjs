import './polyfills.server.mjs';
import{$ as Sr,A as y,B as b,C as Ee,D as Ve,E as vr,F as R,G as ae,H as S,I as At,J as Tt,K as me,L as Cr,S as br,T as Er,U as _i,W as xr,X as Vt,Y as Mt,Z as Me,_ as wr,a as fr,b as pr,c as mr,ca as kr,d as St,e as kt,f as fi,g as Ot,ga as Or,h as Te,ha as Dr,i as Ke,j as pe,ja as Nt,k as Dt,ka as Ar,l as se,m as gr,n as ve,o as Ce,p as _r,q as pi,r as mi,s as T,t as w,u as yr,v as Je,w as be,x as oe,y as I,z as gi}from"./chunk-DRXJCWJU.mjs";import{a as O,b as j,c as v,e as D,f as po,g as U}from"./chunk-VVCT4QZE.mjs";var dn=D((Yl,hn)=>{"use strict";var Ie=1e3,Re=Ie*60,Pe=Re*60,xe=Pe*24,Ko=xe*7,Jo=xe*365.25;hn.exports=function(i,e){e=e||{};var t=typeof i;if(t==="string"&&i.length>0)return Qo(i);if(t==="number"&&isFinite(i))return e.long?ea(i):Zo(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function Qo(i){if(i=String(i),!(i.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*Jo;case"weeks":case"week":case"w":return t*Ko;case"days":case"day":case"d":return t*xe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Pe;case"minutes":case"minute":case"mins":case"min":case"m":return t*Re;case"seconds":case"second":case"secs":case"sec":case"s":return t*Ie;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Zo(i){var e=Math.abs(i);return e>=xe?Math.round(i/xe)+"d":e>=Pe?Math.round(i/Pe)+"h":e>=Re?Math.round(i/Re)+"m":e>=Ie?Math.round(i/Ie)+"s":i+"ms"}function ea(i){var e=Math.abs(i);return e>=xe?Wt(i,e,xe,"day"):e>=Pe?Wt(i,e,Pe,"hour"):e>=Re?Wt(i,e,Re,"minute"):e>=Ie?Wt(i,e,Ie,"second"):i+" ms"}function Wt(i,e,t,r){var n=e>=t*1.5;return Math.round(i/t)+" "+r+(n?"s":"")}});var Di=D((Xl,fn)=>{"use strict";function ta(i){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=n,t.enabled=o,t.humanize=dn(),t.destroy=u,Object.keys(i).forEach(c=>{t[c]=i[c]}),t.names=[],t.skips=[],t.formatters={};function e(c){let h=0;for(let f=0;f<c.length;f++)h=(h<<5)-h+c.charCodeAt(f),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(c){let h,f=null,_,E;function p(...C){if(!p.enabled)return;let B=p,V=Number(new Date),d=V-(h||V);B.diff=d,B.prev=h,B.curr=V,h=V,C[0]=t.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let m=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(M,X)=>{if(M==="%%")return"%";m++;let ie=t.formatters[X];if(typeof ie=="function"){let ze=C[m];M=ie.call(B,ze),C.splice(m,1),m--}return M}),t.formatArgs.call(B,C),(B.log||t.log).apply(B,C)}return p.namespace=c,p.useColors=t.useColors(),p.color=t.selectColor(c),p.extend=r,p.destroy=t.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(_!==t.namespaces&&(_=t.namespaces,E=t.enabled(c)),E),set:C=>{f=C}}),typeof t.init=="function"&&t.init(p),p}function r(c,h){let f=t(this.namespace+(typeof h>"u"?":":h)+c);return f.log=this.log,f}function n(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,f=(typeof c=="string"?c:"").split(/[\s,]+/),_=f.length;for(h=0;h<_;h++)f[h]&&(c=f[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,f;for(h=0,f=t.skips.length;h<f;h++)if(t.skips[h].test(c))return!1;for(h=0,f=t.names.length;h<f;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}fn.exports=ta});var pn=D(($,$t)=>{"use strict";$.formatArgs=ra;$.save=na;$.load=sa;$.useColors=ia;$.storage=oa();$.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();$.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ia(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ra(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+$t.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;i.splice(1,0,e,"color: inherit");let t=0,r=0;i[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(r=t))}),i.splice(r,0,e)}$.log=console.debug||console.log||(()=>{});function na(i){try{i?$.storage.setItem("debug",i):$.storage.removeItem("debug")}catch{}}function sa(){let i;try{i=$.storage.getItem("debug")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function oa(){try{return localStorage}catch{}}$t.exports=Di()($);var{formatters:aa}=$t.exports;aa.j=function(i){try{return JSON.stringify(i)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gn=D((Kl,mn)=>{"use strict";mn.exports=(i,e)=>{e=e||process.argv;let t=i.startsWith("-")?"":i.length===1?"-":"--",r=e.indexOf(t+i),n=e.indexOf("--");return r!==-1&&(n===-1?!0:r<n)}});var yn=D((Jl,_n)=>{"use strict";var ca=v("os"),Z=gn(),q=process.env,Le;Z("no-color")||Z("no-colors")||Z("color=false")?Le=!1:(Z("color")||Z("colors")||Z("color=true")||Z("color=always"))&&(Le=!0);"FORCE_COLOR"in q&&(Le=q.FORCE_COLOR.length===0||parseInt(q.FORCE_COLOR,10)!==0);function la(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function ua(i){if(Le===!1)return 0;if(Z("color=16m")||Z("color=full")||Z("color=truecolor"))return 3;if(Z("color=256"))return 2;if(i&&!i.isTTY&&Le!==!0)return 0;let e=Le?1:0;if(process.platform==="win32"){let t=ca.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in q)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in q)||q.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in q)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(q.TEAMCITY_VERSION)?1:0;if(q.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in q){let t=parseInt((q.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(q.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(q.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(q.TERM)||"COLORTERM"in q?1:(q.TERM==="dumb",e)}function Ai(i){let e=ua(i);return la(e)}_n.exports={supportsColor:Ai,stdout:Ai(process.stdout),stderr:Ai(process.stderr)}});var Cn=D((P,Yt)=>{"use strict";var ha=v("tty"),zt=v("util");P.init=ya;P.log=ma;P.formatArgs=fa;P.save=ga;P.load=_a;P.useColors=da;P.destroy=zt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");P.colors=[6,2,3,4,5,1];try{let i=yn();i&&(i.stderr||i).level>=2&&(P.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}P.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),i[t]=r,i},{});function da(){return"colors"in P.inspectOpts?!!P.inspectOpts.colors:ha.isatty(process.stderr.fd)}function fa(i){let{namespace:e,useColors:t}=this;if(t){let r=this.color,n="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${n};1m${e} \x1B[0m`;i[0]=s+i[0].split(`
`).join(`
`+s),i.push(n+"m+"+Yt.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=pa()+e+" "+i[0]}function pa(){return P.inspectOpts.hideDate?"":new Date().toISOString()+" "}function ma(...i){return process.stderr.write(zt.format(...i)+`
`)}function ga(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function _a(){return process.env.DEBUG}function ya(i){i.inspectOpts={};let e=Object.keys(P.inspectOpts);for(let t=0;t<e.length;t++)i.inspectOpts[e[t]]=P.inspectOpts[e[t]]}Yt.exports=Di()(P);var{formatters:vn}=Yt.exports;vn.o=function(i){return this.inspectOpts.colors=this.useColors,zt.inspect(i,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};vn.O=function(i){return this.inspectOpts.colors=this.useColors,zt.inspect(i,this.inspectOpts)}});var ee=D((Ql,Ti)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ti.exports=pn():Ti.exports=Cn()});var Tn=D((ou,An)=>{"use strict";var Be=v("fs"),Dn=v("url"),ba=v("child_process").spawn;An.exports=Mi;Mi.XMLHttpRequest=Mi;function Mi(i){"use strict";i=i||{};var e=this,t=v("http"),r=v("https"),n,s,o={},a=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u=Object.assign({},l),c=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],h=["TRACE","TRACK","CONNECT"],f=!1,_=!1,E=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null;var C=function(d){return a||d&&c.indexOf(d.toLowerCase())===-1},B=function(d){return d&&h.indexOf(d)===-1};this.open=function(d,m,W,M,X){if(this.abort(),_=!1,E=!1,!B(d))throw new Error("SecurityError: Request method not allowed");o={method:d,url:m.toString(),async:typeof W!="boolean"?!0:W,user:M||null,password:X||null},V(this.OPENED)},this.setDisableHeaderCheck=function(d){a=d},this.setRequestHeader=function(d,m){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!C(d))return console.warn('Refused to set unsafe header "'+d+'"'),!1;if(f)throw new Error("INVALID_STATE_ERR: send flag is true");return u[d]=m,!0},this.getResponseHeader=function(d){return typeof d=="string"&&this.readyState>this.OPENED&&s.headers[d.toLowerCase()]&&!_?s.headers[d.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||_)return"";var d="";for(var m in s.headers)m!=="set-cookie"&&m!=="set-cookie2"&&(d+=m+": "+s.headers[m]+`\r
`);return d.substr(0,d.length-2)},this.getRequestHeader=function(d){return typeof d=="string"&&u[d]?u[d]:""},this.send=function(d){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(f)throw new Error("INVALID_STATE_ERR: send has already been called");var m=!1,W=!1,M=Dn.parse(o.url),X;switch(M.protocol){case"https:":m=!0;case"http:":X=M.hostname;break;case"file:":W=!0;break;case void 0:case"":X="localhost";break;default:throw new Error("Protocol not supported.")}if(W){if(o.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)Be.readFile(unescape(M.pathname),"utf8",function(K,Ae){K?e.handleError(K,K.errno||-1):(e.status=200,e.responseText=Ae,V(e.DONE))});else try{this.responseText=Be.readFileSync(unescape(M.pathname),"utf8"),this.status=200,V(e.DONE)}catch(K){this.handleError(K,K.errno||-1)}return}var ie=M.port||(m?443:80),ze=M.pathname+(M.search?M.search:"");if(u.Host=X,m&&ie===443||ie===80||(u.Host+=":"+M.port),o.user){typeof o.password>"u"&&(o.password="");var co=new Buffer(o.user+":"+o.password);u.Authorization="Basic "+co.toString("base64")}o.method==="GET"||o.method==="HEAD"?d=null:d?(u["Content-Length"]=Buffer.isBuffer(d)?d.length:Buffer.byteLength(d),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):o.method==="POST"&&(u["Content-Length"]=0);var lo=i.agent||!1,ne={host:X,port:ie,path:ze,method:o.method,headers:u,agent:lo};if(m&&(ne.pfx=i.pfx,ne.key=i.key,ne.passphrase=i.passphrase,ne.cert=i.cert,ne.ca=i.ca,ne.ciphers=i.ciphers,ne.rejectUnauthorized=i.rejectUnauthorized!==!1),_=!1,o.async){var ur=m?r.request:t.request;f=!0,e.dispatchEvent("readystatechange");var hr=function(K){if(s=K,s.statusCode===302||s.statusCode===303||s.statusCode===307){o.url=s.headers.location;var Ae=Dn.parse(o.url);X=Ae.hostname;var fe={hostname:Ae.hostname,port:Ae.port,path:Ae.path,method:s.statusCode===303?"GET":o.method,headers:u};m&&(fe.pfx=i.pfx,fe.key=i.key,fe.passphrase=i.passphrase,fe.cert=i.cert,fe.ca=i.ca,fe.ciphers=i.ciphers,fe.rejectUnauthorized=i.rejectUnauthorized!==!1),n=ur(fe,hr).on("error",dr),n.end();return}s&&s.setEncoding&&s.setEncoding("utf8"),V(e.HEADERS_RECEIVED),e.status=s.statusCode,s.on("data",function(wt){wt&&(e.responseText+=wt),f&&V(e.LOADING)}),s.on("end",function(){f&&(f=!1,V(e.DONE))}),s.on("error",function(wt){e.handleError(wt)})},dr=function(K){e.handleError(K)};n=ur(ne,hr).on("error",dr),i.autoUnref&&n.on("socket",K=>{K.unref()}),d&&n.write(d),n.end(),e.dispatchEvent("loadstart")}else{var Ye=".node-xmlhttprequest-content-"+process.pid,Xe=".node-xmlhttprequest-sync-"+process.pid;Be.writeFileSync(Xe,"","utf8");for(var uo="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(m?"s":"")+".request;var options = "+JSON.stringify(ne)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+Ye+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+Xe+"');});response.on('error', function(error) {fs.writeFileSync('"+Ye+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Xe+"');});}).on('error', function(error) {fs.writeFileSync('"+Ye+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Xe+"');});"+(d?"req.write('"+JSON.stringify(d).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",ho=ba(process.argv[0],["-e",uo]),dl;Be.existsSync(Xe););if(e.responseText=Be.readFileSync(Ye,"utf8"),ho.stdin.end(),Be.unlinkSync(Ye),e.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var fo=e.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");e.handleError(fo,503)}else e.status=e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),e.responseText=e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),V(e.DONE)}},this.handleError=function(d,m){this.status=m||0,this.statusText=d,this.responseText=d.stack,_=!0,V(this.DONE)},this.abort=function(){n&&(n.abort(),n=null),u=Object.assign({},l),this.responseText="",this.responseXML="",_=E=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||f)&&this.readyState!==this.DONE&&(f=!1,V(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(d,m){d in p||(p[d]=[]),p[d].push(m)},this.removeEventListener=function(d,m){d in p&&(p[d]=p[d].filter(function(W){return W!==m}))},this.dispatchEvent=function(d){if(typeof e["on"+d]=="function"&&(this.readyState===this.DONE?setImmediate(function(){e["on"+d]()}):e["on"+d]()),d in p)for(let m=0,W=p[d].length;m<W;m++)this.readyState===this.DONE?setImmediate(function(){p[d][m].call(e)}):p[d][m].call(e)};var V=function(d){if(!(e.readyState===d||e.readyState===e.UNSENT&&E)&&(e.readyState=d,(o.async||e.readyState<e.OPENED||e.readyState===e.DONE)&&e.dispatchEvent("readystatechange"),e.readyState===e.DONE)){let m;E?m="abort":_?m="error":m="load",e.dispatchEvent(m),e.dispatchEvent("loadend")}}}});var Pn=D((gu,Rn)=>{"use strict";var{Duplex:Sa}=v("stream");function Fn(i){i.emit("close")}function ka(){!this.destroyed&&this._writableState.finished&&this.destroy()}function In(i){this.removeListener("error",In),this.destroy(),this.listenerCount("error")===0&&this.emit("error",i)}function Oa(i,e){let t=!0,r=new Sa(j(O({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return i.on("message",function(s,o){let a=!o&&r._readableState.objectMode?s.toString():s;r.push(a)||i.pause()}),i.once("error",function(s){r.destroyed||(t=!1,r.destroy(s))}),i.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(n,s){if(i.readyState===i.CLOSED){s(n),process.nextTick(Fn,r);return}let o=!1;i.once("error",function(l){o=!0,s(l)}),i.once("close",function(){o||s(n),process.nextTick(Fn,r)}),t&&i.terminate()},r._final=function(n){if(i.readyState===i.CONNECTING){i.once("open",function(){r._final(n)});return}i._socket!==null&&(i._socket._writableState.finished?(n(),r._readableState.endEmitted&&r.destroy()):(i._socket.once("finish",function(){n()}),i.close()))},r._read=function(){i.isPaused&&i.resume()},r._write=function(n,s,o){if(i.readyState===i.CONNECTING){i.once("open",function(){r._write(n,s,o)});return}i.send(n,o)},r.on("end",ka),r.on("error",In),r}Rn.exports=Oa});var ge=D((yu,Ln)=>{"use strict";Ln.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var at=D((vu,ei)=>{"use strict";var{EMPTY_BUFFER:Da}=ge();function Aa(i,e){if(i.length===0)return Da;if(i.length===1)return i[0];let t=Buffer.allocUnsafe(e),r=0;for(let n=0;n<i.length;n++){let s=i[n];t.set(s,r),r+=s.length}return r<e?t.slice(0,r):t}function Bn(i,e,t,r,n){for(let s=0;s<n;s++)t[r+s]=i[s]^e[s&3]}function Un(i,e){for(let t=0;t<i.length;t++)i[t]^=e[t&3]}function Ta(i){return i.byteLength===i.buffer.byteLength?i.buffer:i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}function Ri(i){if(Ri.readOnly=!0,Buffer.isBuffer(i))return i;let e;return i instanceof ArrayBuffer?e=Buffer.from(i):ArrayBuffer.isView(i)?e=Buffer.from(i.buffer,i.byteOffset,i.byteLength):(e=Buffer.from(i),Ri.readOnly=!1),e}ei.exports={concat:Aa,mask:Bn,toArrayBuffer:Ta,toBuffer:Ri,unmask:Un};if(!process.env.WS_NO_BUFFER_UTIL)try{let i=v("bufferutil");ei.exports.mask=function(e,t,r,n,s){s<48?Bn(e,t,r,n,s):i.mask(e,t,r,n,s)},ei.exports.unmask=function(e,t){e.length<32?Un(e,t):i.unmask(e,t)}}catch{}});var jn=D((Cu,Gn)=>{"use strict";var qn=Symbol("kDone"),Pi=Symbol("kRun"),Li=class{constructor(e){this[qn]=()=>{this.pending--,this[Pi]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Pi]()}[Pi](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[qn])}}};Gn.exports=Li});var ut=D((bu,zn)=>{"use strict";var ct=v("zlib"),Hn=at(),Va=jn(),{kStatusCode:Wn}=ge(),Ma=Buffer.from([0,0,255,255]),ri=Symbol("permessage-deflate"),ue=Symbol("total-length"),lt=Symbol("callback"),_e=Symbol("buffers"),ii=Symbol("error"),ti,Bi=class{constructor(e,t,r){if(this._maxPayload=r|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!ti){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;ti=new Va(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[lt];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(n=>!(t.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>n.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(r.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?r.client_max_window_bits=t.clientMaxWindowBits:(r.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(r=>{let n=t[r];if(n.length>1)throw new Error(`Parameter "${r}" must have only a single value`);if(n=n[0],r==="client_max_window_bits"){if(n!==!0){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${n}`);n=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${r}": ${n}`)}else if(r==="server_max_window_bits"){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${n}`);n=s}else if(r==="client_no_context_takeover"||r==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${r}": ${n}`)}else throw new Error(`Unknown parameter "${r}"`);t[r]=n})}),e}decompress(e,t,r){ti.add(n=>{this._decompress(e,t,(s,o)=>{n(),r(s,o)})})}compress(e,t,r){ti.add(n=>{this._compress(e,t,(s,o)=>{n(),r(s,o)})})}_decompress(e,t,r){let n=this._isServer?"client":"server";if(!this._inflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?ct.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=ct.createInflateRaw(j(O({},this._options.zlibInflateOptions),{windowBits:o})),this._inflate[ri]=this,this._inflate[ue]=0,this._inflate[_e]=[],this._inflate.on("error",Fa),this._inflate.on("data",$n)}this._inflate[lt]=r,this._inflate.write(e),t&&this._inflate.write(Ma),this._inflate.flush(()=>{let s=this._inflate[ii];if(s){this._inflate.close(),this._inflate=null,r(s);return}let o=Hn.concat(this._inflate[_e],this._inflate[ue]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ue]=0,this._inflate[_e]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),r(null,o)})}_compress(e,t,r){let n=this._isServer?"server":"client";if(!this._deflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?ct.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=ct.createDeflateRaw(j(O({},this._options.zlibDeflateOptions),{windowBits:o})),this._deflate[ue]=0,this._deflate[_e]=[],this._deflate.on("data",Na)}this._deflate[lt]=r,this._deflate.write(e),this._deflate.flush(ct.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=Hn.concat(this._deflate[_e],this._deflate[ue]);t&&(s=s.slice(0,s.length-4)),this._deflate[lt]=null,this._deflate[ue]=0,this._deflate[_e]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),r(null,s)})}};zn.exports=Bi;function Na(i){this[_e].push(i),this[ue]+=i.length}function $n(i){if(this[ue]+=i.length,this[ri]._maxPayload<1||this[ue]<=this[ri]._maxPayload){this[_e].push(i);return}this[ii]=new RangeError("Max payload size exceeded"),this[ii].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[ii][Wn]=1009,this.removeListener("data",$n),this.reset()}function Fa(i){this[ri]._inflate=null,i[Wn]=1007,this[lt](i)}});var ht=D((xu,Ui)=>{"use strict";var Ia=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Ra(i){return i>=1e3&&i<=1014&&i!==1004&&i!==1005&&i!==1006||i>=3e3&&i<=4999}function Yn(i){let e=i.length,t=0;for(;t<e;)if(!(i[t]&128))t++;else if((i[t]&224)===192){if(t+1===e||(i[t+1]&192)!==128||(i[t]&254)===192)return!1;t+=2}else if((i[t]&240)===224){if(t+2>=e||(i[t+1]&192)!==128||(i[t+2]&192)!==128||i[t]===224&&(i[t+1]&224)===128||i[t]===237&&(i[t+1]&224)===160)return!1;t+=3}else if((i[t]&248)===240){if(t+3>=e||(i[t+1]&192)!==128||(i[t+2]&192)!==128||(i[t+3]&192)!==128||i[t]===240&&(i[t+1]&240)===128||i[t]===244&&i[t+1]>143||i[t]>244)return!1;t+=4}else return!1;return!0}Ui.exports={isValidStatusCode:Ra,isValidUTF8:Yn,tokenChars:Ia};if(!process.env.WS_NO_UTF_8_VALIDATE)try{let i=v("utf-8-validate");Ui.exports.isValidUTF8=function(e){return e.length<150?Yn(e):i(e)}}catch{}});var Hi=D((wu,ts)=>{"use strict";var{Writable:Pa}=v("stream"),Xn=ut(),{BINARY_TYPES:La,EMPTY_BUFFER:Kn,kStatusCode:Ba,kWebSocket:Ua}=ge(),{concat:qi,toArrayBuffer:qa,unmask:Ga}=at(),{isValidStatusCode:ja,isValidUTF8:Jn}=ht(),dt=0,Qn=1,Zn=2,es=3,Gi=4,Ha=5,ji=class extends Pa{constructor(e={}){super(),this._binaryType=e.binaryType||La[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Ua]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=dt,this._loop=!1}_write(e,t,r){if(this._opcode===8&&this._state==dt)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=r.slice(e),r.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case dt:t=this.getInfo();break;case Qn:t=this.getPayloadLength16();break;case Zn:t=this.getPayloadLength64();break;case es:this.getMask();break;case Gi:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,N(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[Xn.extensionName])return this._loop=!1,N(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,N(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,N(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,N(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,N(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,N(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,N(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,N(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,N(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,N(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Qn;else if(this._payloadLength===127)this._state=Zn;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,N(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,N(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=es:this._state=Gi}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Gi}getData(e){let t=Kn;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Ga(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Ha,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[Xn.extensionName].decompress(e,this._fin,(n,s)=>{if(n)return t(n);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(N(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=qi(t,e):this._binaryType==="arraybuffer"?r=qa(qi(t,e)):r=t,this.emit("message",r,!0)}else{let r=qi(t,e);if(!this._skipUTF8Validation&&!Jn(r))return this._loop=!1,N(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=dt}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,Kn),this.end();else{if(e.length===1)return N(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!ja(t))return N(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let r=e.slice(2);if(!this._skipUTF8Validation&&!Jn(r))return N(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=dt}};ts.exports=ji;function N(i,e,t,r,n){let s=new i(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,N),s.code=n,s[Ba]=r,s}});var $i=D((Ou,ns)=>{"use strict";var Su=v("net"),ku=v("tls"),{randomFillSync:Wa}=v("crypto"),is=ut(),{EMPTY_BUFFER:$a}=ge(),{isValidStatusCode:za}=ht(),{mask:rs,toBuffer:Ue}=at(),te=Symbol("kByteLength"),Ya=Buffer.alloc(4),Wi=class i{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,n=!1,s=2,o=!1;t.mask&&(r=t.maskBuffer||Ya,t.generateMask?t.generateMask(r):Wa(r,0,4),o=(r[0]|r[1]|r[2]|r[3])===0,s=6);let a;typeof e=="string"?(!t.mask||o)&&t[te]!==void 0?a=t[te]:(e=Buffer.from(e),a=e.length):(a=e.length,n=t.mask&&t.readOnly&&!o);let l=a;a>=65536?(s+=8,l=127):a>125&&(s+=2,l=126);let u=Buffer.allocUnsafe(n?a+s:s);return u[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(u[0]|=64),u[1]=l,l===126?u.writeUInt16BE(a,2):l===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),t.mask?(u[1]|=128,u[s-4]=r[0],u[s-3]=r[1],u[s-2]=r[2],u[s-1]=r[3],o?[u,e]:n?(rs(e,r,u,s,a),[u]):(rs(e,r,e,0,a),[u,e])):[u,e]}close(e,t,r,n){let s;if(e===void 0)s=$a;else{if(typeof e!="number"||!za(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof t=="string"?s.write(t,2):s.set(t,2)}}let o={[te]:s.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,o,n]):this.sendFrame(i.frame(s,o),n)}ping(e,t,r){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):(e=Ue(e),n=e.length,s=Ue.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[te]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(i.frame(e,o),r)}pong(e,t,r){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):(e=Ue(e),n=e.length,s=Ue.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[te]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(i.frame(e,o),r)}send(e,t,r){let n=this._extensions[is.extensionName],s=t.binary?2:1,o=t.compress,a,l;if(typeof e=="string"?(a=Buffer.byteLength(e),l=!1):(e=Ue(e),a=e.length,l=Ue.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=n._threshold),this._compress=o):(o=!1,s=0),t.fin&&(this._firstFragment=!0),n){let u={[te]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}else this.sendFrame(i.frame(e,{[te]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:!1}),r)}dispatch(e,t,r,n){if(!t){this.sendFrame(i.frame(e,r),n);return}let s=this._extensions[is.extensionName];this._bufferedBytes+=r[te],this._deflating=!0,s.compress(e,r.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(l);for(let u=0;u<this._queue.length;u++){let c=this._queue[u],h=c[c.length-1];typeof h=="function"&&h(l)}return}this._bufferedBytes-=r[te],this._deflating=!1,r.readOnly=!1,this.sendFrame(i.frame(a,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][te],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][te],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};ns.exports=Wi});var fs=D((Du,ds)=>{"use strict";var{kForOnEventAttribute:ft,kListener:zi}=ge(),ss=Symbol("kCode"),os=Symbol("kData"),as=Symbol("kError"),cs=Symbol("kMessage"),ls=Symbol("kReason"),qe=Symbol("kTarget"),us=Symbol("kType"),hs=Symbol("kWasClean"),he=class{constructor(e){this[qe]=null,this[us]=e}get target(){return this[qe]}get type(){return this[us]}};Object.defineProperty(he.prototype,"target",{enumerable:!0});Object.defineProperty(he.prototype,"type",{enumerable:!0});var we=class extends he{constructor(e,t={}){super(e),this[ss]=t.code===void 0?0:t.code,this[ls]=t.reason===void 0?"":t.reason,this[hs]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[ss]}get reason(){return this[ls]}get wasClean(){return this[hs]}};Object.defineProperty(we.prototype,"code",{enumerable:!0});Object.defineProperty(we.prototype,"reason",{enumerable:!0});Object.defineProperty(we.prototype,"wasClean",{enumerable:!0});var Ge=class extends he{constructor(e,t={}){super(e),this[as]=t.error===void 0?null:t.error,this[cs]=t.message===void 0?"":t.message}get error(){return this[as]}get message(){return this[cs]}};Object.defineProperty(Ge.prototype,"error",{enumerable:!0});Object.defineProperty(Ge.prototype,"message",{enumerable:!0});var pt=class extends he{constructor(e,t={}){super(e),this[os]=t.data===void 0?null:t.data}get data(){return this[os]}};Object.defineProperty(pt.prototype,"data",{enumerable:!0});var Xa={addEventListener(i,e,t={}){for(let n of this.listeners(i))if(!t[ft]&&n[zi]===e&&!n[ft])return;let r;if(i==="message")r=function(s,o){let a=new pt("message",{data:o?s:s.toString()});a[qe]=this,ni(e,this,a)};else if(i==="close")r=function(s,o){let a=new we("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[qe]=this,ni(e,this,a)};else if(i==="error")r=function(s){let o=new Ge("error",{error:s,message:s.message});o[qe]=this,ni(e,this,o)};else if(i==="open")r=function(){let s=new he("open");s[qe]=this,ni(e,this,s)};else return;r[ft]=!!t[ft],r[zi]=e,t.once?this.once(i,r):this.on(i,r)},removeEventListener(i,e){for(let t of this.listeners(i))if(t[zi]===e&&!t[ft]){this.removeListener(i,t);break}}};ds.exports={CloseEvent:we,ErrorEvent:Ge,Event:he,EventTarget:Xa,MessageEvent:pt};function ni(i,e,t){typeof i=="object"&&i.handleEvent?i.handleEvent.call(i,t):i.call(e,t)}});var Yi=D((Au,ps)=>{"use strict";var{tokenChars:mt}=ht();function re(i,e,t){i[e]===void 0?i[e]=[t]:i[e].push(t)}function Ka(i){let e=Object.create(null),t=Object.create(null),r=!1,n=!1,s=!1,o,a,l=-1,u=-1,c=-1,h=0;for(;h<i.length;h++)if(u=i.charCodeAt(h),o===void 0)if(c===-1&&mt[u]===1)l===-1&&(l=h);else if(h!==0&&(u===32||u===9))c===-1&&l!==-1&&(c=h);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);c===-1&&(c=h);let _=i.slice(l,c);u===44?(re(e,_,t),t=Object.create(null)):o=_,l=c=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);else if(a===void 0)if(c===-1&&mt[u]===1)l===-1&&(l=h);else if(u===32||u===9)c===-1&&l!==-1&&(c=h);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);c===-1&&(c=h),re(t,i.slice(l,c),!0),u===44&&(re(e,o,t),t=Object.create(null),o=void 0),l=c=-1}else if(u===61&&l!==-1&&c===-1)a=i.slice(l,h),l=c=-1;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(n){if(mt[u]!==1)throw new SyntaxError(`Unexpected character at index ${h}`);l===-1?l=h:r||(r=!0),n=!1}else if(s)if(mt[u]===1)l===-1&&(l=h);else if(u===34&&l!==-1)s=!1,c=h;else if(u===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(u===34&&i.charCodeAt(h-1)===61)s=!0;else if(c===-1&&mt[u]===1)l===-1&&(l=h);else if(l!==-1&&(u===32||u===9))c===-1&&(c=h);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);c===-1&&(c=h);let _=i.slice(l,c);r&&(_=_.replace(/\\/g,""),r=!1),re(t,a,_),u===44&&(re(e,o,t),t=Object.create(null),o=void 0),a=void 0,l=c=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);if(l===-1||s||u===32||u===9)throw new SyntaxError("Unexpected end of input");c===-1&&(c=h);let f=i.slice(l,c);return o===void 0?re(e,f,t):(a===void 0?re(t,f,!0):r?re(t,a,f.replace(/\\/g,"")):re(t,a,f),re(e,o,t)),e}function Ja(i){return Object.keys(i).map(e=>{let t=i[e];return Array.isArray(t)||(t=[t]),t.map(r=>[e].concat(Object.keys(r).map(n=>{let s=r[n];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}ps.exports={format:Ja,parse:Ka}});var Zi=D((Vu,Ss)=>{"use strict";var Qa=v("events"),Za=v("https"),ec=v("http"),_s=v("net"),tc=v("tls"),{randomBytes:ic,createHash:rc}=v("crypto"),{Readable:Tu}=v("stream"),{URL:Xi}=v("url"),ye=ut(),nc=Hi(),sc=$i(),{BINARY_TYPES:ms,EMPTY_BUFFER:si,GUID:oc,kForOnEventAttribute:Ki,kListener:ac,kStatusCode:cc,kWebSocket:G,NOOP:ys}=ge(),{EventTarget:{addEventListener:lc,removeEventListener:uc}}=fs(),{format:hc,parse:dc}=Yi(),{toBuffer:fc}=at(),pc=30*1e3,vs=Symbol("kAborted"),Ji=[8,13],de=["CONNECTING","OPEN","CLOSING","CLOSED"],mc=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,A=class i extends Qa{constructor(e,t,r){super(),this._binaryType=ms[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=si,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=i.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(r=t,t=[]):t=[t]),Cs(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){ms.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let n=new nc({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new sc(e,this._extensions,r.generateMask),this._receiver=n,this._socket=e,n[G]=this,e[G]=this,n.on("conclude",yc),n.on("drain",vc),n.on("error",Cc),n.on("message",bc),n.on("ping",Ec),n.on("pong",xc),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Es),e.on("data",ai),e.on("end",xs),e.on("error",ws),this._readyState=i.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ye.extensionName]&&this._extensions[ye.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING)return z(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===i.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=i.CLOSING,this._sender.close(e,t,!this._isServer,r=>{r||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),pc)}}pause(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=t=void 0):typeof t=="function"&&(r=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Qi(this,e,r);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||si,t,r)}pong(e,t,r){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=t=void 0):typeof t=="function"&&(r=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Qi(this,e,r);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||si,t,r)}resume(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(r=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Qi(this,e,r);return}let n=O({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[ye.extensionName]||(n.compress=!1),this._sender.send(e||si,n,r)}terminate(){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING)return z(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=i.CLOSING,this._socket.destroy())}}};Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:de.indexOf("CONNECTING")});Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:de.indexOf("CONNECTING")});Object.defineProperty(A,"OPEN",{enumerable:!0,value:de.indexOf("OPEN")});Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:de.indexOf("OPEN")});Object.defineProperty(A,"CLOSING",{enumerable:!0,value:de.indexOf("CLOSING")});Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:de.indexOf("CLOSING")});Object.defineProperty(A,"CLOSED",{enumerable:!0,value:de.indexOf("CLOSED")});Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:de.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(i=>{Object.defineProperty(A.prototype,i,{enumerable:!0})});["open","error","close","message"].forEach(i=>{Object.defineProperty(A.prototype,`on${i}`,{enumerable:!0,get(){for(let e of this.listeners(i))if(e[Ki])return e[ac];return null},set(e){for(let t of this.listeners(i))if(t[Ki]){this.removeListener(i,t);break}typeof e=="function"&&this.addEventListener(i,e,{[Ki]:!0})}})});A.prototype.addEventListener=lc;A.prototype.removeEventListener=uc;Ss.exports=A;function Cs(i,e,t,r){let n=j(O({protocolVersion:Ji[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},r),{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(!Ji.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Ji.join(", ")})`);let s;if(e instanceof Xi)s=e,i._url=e.href;else{try{s=new Xi(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i._url=e}let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",l;if(s.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:a&&!s.pathname?l="The URL's pathname is empty":s.hash&&(l="The URL contains a fragment identifier"),l){let p=new SyntaxError(l);if(i._redirects===0)throw p;oi(i,p);return}let u=o?443:80,c=ic(16).toString("base64"),h=o?Za.request:ec.request,f=new Set,_;if(n.createConnection=o?_c:gc,n.defaultPort=n.defaultPort||u,n.port=s.port||u,n.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,n.headers=j(O({},n.headers),{"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":c,Connection:"Upgrade",Upgrade:"websocket"}),n.path=s.pathname+s.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(_=new ye(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=hc({[ye.extensionName]:_.offer()})),t.length){for(let p of t){if(typeof p!="string"||!mc.test(p)||f.has(p))throw new SyntaxError("An invalid or duplicated subprotocol was specified");f.add(p)}n.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(s.username||s.password)&&(n.auth=`${s.username}:${s.password}`),a){let p=n.path.split(":");n.socketPath=p[0],n.path=p[1]}let E;if(n.followRedirects){if(i._redirects===0){i._originalIpc=a,i._originalSecure=o,i._originalHostOrSocketPath=a?n.socketPath:s.host;let p=r&&r.headers;if(r=j(O({},r),{headers:{}}),p)for(let[C,B]of Object.entries(p))r.headers[C.toLowerCase()]=B}else if(i.listenerCount("redirect")===0){let p=a?i._originalIpc?n.socketPath===i._originalHostOrSocketPath:!1:i._originalIpc?!1:s.host===i._originalHostOrSocketPath;(!p||i._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,p||delete n.headers.host,n.auth=void 0)}n.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),E=i._req=h(n),i._redirects&&i.emit("redirect",i.url,E)}else E=i._req=h(n);n.timeout&&E.on("timeout",()=>{z(i,E,"Opening handshake has timed out")}),E.on("error",p=>{E===null||E[vs]||(E=i._req=null,oi(i,p))}),E.on("response",p=>{let C=p.headers.location,B=p.statusCode;if(C&&n.followRedirects&&B>=300&&B<400){if(++i._redirects>n.maxRedirects){z(i,E,"Maximum redirects exceeded");return}E.abort();let V;try{V=new Xi(C,e)}catch{let m=new SyntaxError(`Invalid URL: ${C}`);oi(i,m);return}Cs(i,V,t,r)}else i.emit("unexpected-response",E,p)||z(i,E,`Unexpected server response: ${p.statusCode}`)}),E.on("upgrade",(p,C,B)=>{if(i.emit("upgrade",p),i.readyState!==A.CONNECTING)return;if(E=i._req=null,p.headers.upgrade.toLowerCase()!=="websocket"){z(i,C,"Invalid Upgrade header");return}let V=rc("sha1").update(c+oc).digest("base64");if(p.headers["sec-websocket-accept"]!==V){z(i,C,"Invalid Sec-WebSocket-Accept header");return}let d=p.headers["sec-websocket-protocol"],m;if(d!==void 0?f.size?f.has(d)||(m="Server sent an invalid subprotocol"):m="Server sent a subprotocol but none was requested":f.size&&(m="Server sent no subprotocol"),m){z(i,C,m);return}d&&(i._protocol=d);let W=p.headers["sec-websocket-extensions"];if(W!==void 0){if(!_){z(i,C,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let M;try{M=dc(W)}catch{z(i,C,"Invalid Sec-WebSocket-Extensions header");return}let X=Object.keys(M);if(X.length!==1||X[0]!==ye.extensionName){z(i,C,"Server indicated an extension that was not requested");return}try{_.accept(M[ye.extensionName])}catch{z(i,C,"Invalid Sec-WebSocket-Extensions header");return}i._extensions[ye.extensionName]=_}i.setSocket(C,B,{generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),E.end()}function oi(i,e){i._readyState=A.CLOSING,i.emit("error",e),i.emitClose()}function gc(i){return i.path=i.socketPath,_s.connect(i)}function _c(i){return i.path=void 0,!i.servername&&i.servername!==""&&(i.servername=_s.isIP(i.host)?"":i.host),tc.connect(i)}function z(i,e,t){i._readyState=A.CLOSING;let r=new Error(t);Error.captureStackTrace(r,z),e.setHeader?(e[vs]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(oi,i,r)):(e.destroy(r),e.once("error",i.emit.bind(i,"error")),e.once("close",i.emitClose.bind(i)))}function Qi(i,e,t){if(e){let r=fc(e).length;i._socket?i._sender._bufferedBytes+=r:i._bufferedAmount+=r}if(t){let r=new Error(`WebSocket is not open: readyState ${i.readyState} (${de[i.readyState]})`);t(r)}}function yc(i,e){let t=this[G];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=i,t._socket[G]!==void 0&&(t._socket.removeListener("data",ai),process.nextTick(bs,t._socket),i===1005?t.close():t.close(i,e))}function vc(){let i=this[G];i.isPaused||i._socket.resume()}function Cc(i){let e=this[G];e._socket[G]!==void 0&&(e._socket.removeListener("data",ai),process.nextTick(bs,e._socket),e.close(i[cc])),e.emit("error",i)}function gs(){this[G].emitClose()}function bc(i,e){this[G].emit("message",i,e)}function Ec(i){let e=this[G];e.pong(i,!e._isServer,ys),e.emit("ping",i)}function xc(i){this[G].emit("pong",i)}function bs(i){i.resume()}function Es(){let i=this[G];this.removeListener("close",Es),this.removeListener("data",ai),this.removeListener("end",xs),i._readyState=A.CLOSING;let e;!this._readableState.endEmitted&&!i._closeFrameReceived&&!i._receiver._writableState.errorEmitted&&(e=i._socket.read())!==null&&i._receiver.write(e),i._receiver.end(),this[G]=void 0,clearTimeout(i._closeTimer),i._receiver._writableState.finished||i._receiver._writableState.errorEmitted?i.emitClose():(i._receiver.on("error",gs),i._receiver.on("finish",gs))}function ai(i){this[G]._receiver.write(i)||this.pause()}function xs(){let i=this[G];i._readyState=A.CLOSING,i._receiver.end(),this.end()}function ws(){let i=this[G];this.removeListener("error",ws),this.on("error",ys),i&&(i._readyState=A.CLOSING,this.destroy())}});var Os=D((Nu,ks)=>{"use strict";var{tokenChars:wc}=ht();function Sc(i){let e=new Set,t=-1,r=-1,n=0;for(n;n<i.length;n++){let o=i.charCodeAt(n);if(r===-1&&wc[o]===1)t===-1&&(t=n);else if(n!==0&&(o===32||o===9))r===-1&&t!==-1&&(r=n);else if(o===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${n}`);r===-1&&(r=n);let a=i.slice(t,r);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=r=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(t===-1||r!==-1)throw new SyntaxError("Unexpected end of input");let s=i.slice(t,n);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}ks.exports={parse:Sc}});var Fs=D((Pu,Ns)=>{"use strict";var kc=v("events"),ci=v("http"),Fu=v("https"),Iu=v("net"),Ru=v("tls"),{createHash:Oc}=v("crypto"),Ds=Yi(),Se=ut(),Dc=Os(),Ac=Zi(),{GUID:Tc,kWebSocket:Vc}=ge(),Mc=/^[+/0-9A-Za-z]{22}==$/,As=0,Ts=1,Ms=2,er=class extends kc{constructor(e,t){if(super(),e=O({maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Ac},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=ci.createServer((r,n)=>{let s=ci.STATUS_CODES[426];n.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),n.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let r=this.emit.bind(this,"connection");this._removeListeners=Nc(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,s,o)=>{this.handleUpgrade(n,s,o,r)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=As}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===Ms){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(gt,this);return}if(e&&this.once("close",e),this._state!==Ts)if(this._state=Ts,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(gt,this):process.nextTick(gt,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{gt(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",Vs);let s=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){ke(this,e,t,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){ke(this,e,t,400,"Invalid Upgrade header");return}if(!s||!Mc.test(s)){ke(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){ke(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){_t(t,400);return}let a=e.headers["sec-websocket-protocol"],l=new Set;if(a!==void 0)try{l=Dc.parse(a)}catch{ke(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],c={};if(this.options.perMessageDeflate&&u!==void 0){let h=new Se(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=Ds.parse(u);f[Se.extensionName]&&(h.accept(f[Se.extensionName]),c[Se.extensionName]=h)}catch{ke(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let h={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(f,_,E,p)=>{if(!f)return _t(t,_||401,E,p);this.completeUpgrade(c,s,l,e,t,r,n)});return}if(!this.options.verifyClient(h))return _t(t,401)}this.completeUpgrade(c,s,l,e,t,r,n)}completeUpgrade(e,t,r,n,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[Vc])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>As)return _t(s,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Oc("sha1").update(t+Tc).digest("base64")}`],c=new this.options.WebSocket(null);if(r.size){let h=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;h&&(u.push(`Sec-WebSocket-Protocol: ${h}`),c._protocol=h)}if(e[Se.extensionName]){let h=e[Se.extensionName].params,f=Ds.format({[Se.extensionName]:[h]});u.push(`Sec-WebSocket-Extensions: ${f}`),c._extensions=e}this.emit("headers",u,n),s.write(u.concat(`\r
`).join(`\r
`)),s.removeListener("error",Vs),c.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(c),c.on("close",()=>{this.clients.delete(c),this._shouldEmitClose&&!this.clients.size&&process.nextTick(gt,this)})),a(c,n)}};Ns.exports=er;function Nc(i,e){for(let t of Object.keys(e))i.on(t,e[t]);return function(){for(let r of Object.keys(e))i.removeListener(r,e[r])}}function gt(i){i._state=Ms,i.emit("close")}function Vs(){this.destroy()}function _t(i,e,t,r){t=t||ci.STATUS_CODES[e],r=O({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},r),i.once("finish",i.destroy),i.end(`HTTP/1.1 ${e} ${ci.STATUS_CODES[e]}\r
`+Object.keys(r).map(n=>`${n}: ${r[n]}`).join(`\r
`)+`\r
\r
`+t)}function ke(i,e,t,r,n){if(i.listenerCount("wsClientError")){let s=new Error(n);Error.captureStackTrace(s,ke),i.emit("wsClientError",s,t,e)}else _t(t,r,n)}});var Pr=(()=>{let e=class e{constructor(r,n){this._renderer=r,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,n){this._renderer.setProperty(this._elementRef.nativeElement,r,n)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(n){return new(n||e)(w(mi),w(pi))},e.\u0275dir=se({type:e});let i=e;return i})(),mo=(()=>{let e=class e extends Pr{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=_r(e)))(s||e)}})(),e.\u0275dir=se({type:e,features:[be]});let i=e;return i})(),Lr=new Te("NgValueAccessor");var go={provide:Lr,useExisting:kt(()=>Ut),multi:!0};function _o(){let i=_i()?_i().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var yo=new Te("CompositionEventMode"),Ut=(()=>{let e=class e extends Pr{constructor(r,n,s){super(r,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!_o())}writeValue(r){let n=r??"";this.setProperty("value",n)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(n){return new(n||e)(w(mi),w(pi),w(yo,8))},e.\u0275dir=se({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,s){n&1&&R("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Tt([go]),be]});let i=e;return i})();var Br=new Te("NgValidators"),Ur=new Te("NgAsyncValidators");function qr(i){return i!=null}function Gr(i){return vr(i)?fr(i):i}function jr(i){let e={};return i.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function Hr(i,e){return e.map(t=>t(i))}function vo(i){return!i.validate}function Wr(i){return i.map(e=>vo(e)?e:t=>e.validate(t))}function Co(i){if(!i)return null;let e=i.filter(qr);return e.length==0?null:function(t){return jr(Hr(t,e))}}function vi(i){return i!=null?Co(Wr(i)):null}function bo(i){if(!i)return null;let e=i.filter(qr);return e.length==0?null:function(t){let r=Hr(t,e).map(Gr);return mr(r).pipe(pr(jr))}}function Ci(i){return i!=null?bo(Wr(i)):null}function Tr(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Eo(i){return i._rawValidators}function xo(i){return i._rawAsyncValidators}function yi(i){return i?Array.isArray(i)?i:[i]:[]}function It(i,e){return Array.isArray(i)?i.includes(e):i===e}function Vr(i,e){let t=yi(e);return yi(i).forEach(n=>{It(t,n)||t.push(n)}),t}function Mr(i,e){return yi(e).filter(t=>!It(i,t))}var Rt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vi(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ci(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fe=class extends Rt{get formDirective(){return null}get path(){return null}},tt=class extends Rt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pt=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},wo={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ml=j(O({},wo),{"[class.ng-submitted]":"isSubmitted"}),$r=(()=>{let e=class e extends Pt{constructor(r){super(r)}};e.\u0275fac=function(n){return new(n||e)(w(tt,2))},e.\u0275dir=se({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,s){n&2&&gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[be]});let i=e;return i})(),zr=(()=>{let e=class e extends Pt{constructor(r){super(r)}};e.\u0275fac=function(n){return new(n||e)(w(Fe,10))},e.\u0275dir=se({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,s){n&2&&gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[be]});let i=e;return i})();var Qe="VALID",Ft="INVALID",Ne="PENDING",Ze="DISABLED";function Yr(i){return(qt(i)?i.validators:i)||null}function So(i){return Array.isArray(i)?vi(i):i||null}function Xr(i,e){return(qt(e)?e.asyncValidators:i)||null}function ko(i){return Array.isArray(i)?Ci(i):i||null}function qt(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Oo(i,e,t){let r=i.controls;if(!(e?Object.keys(r):r).length)throw new St(1e3,"");if(!r[t])throw new St(1001,"")}function Do(i,e,t){i._forEachChild((r,n)=>{if(t[n]===void 0)throw new St(1002,"")})}var Lt=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qe}get invalid(){return this.status===Ft}get pending(){return this.status==Ne}get disabled(){return this.status===Ze}get enabled(){return this.status!==Ze}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mr(e,this._rawAsyncValidators))}hasValidator(e){return It(this._rawValidators,e)}hasAsyncValidator(e){return It(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ne,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ze,this.errors=null,this._forEachChild(r=>{r.disable(j(O({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(j(O({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Qe,this._forEachChild(r=>{r.enable(j(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(j(O({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qe||this.status===Ne)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ze:Qe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ne,this._hasOwnPendingAsyncValidator=!0;let t=Gr(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,n)=>r&&r._find(n),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Ze:this.errors?Ft:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ne)?Ne:this._anyControlsHaveStatus(Ft)?Ft:Qe}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qt(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=So(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ko(this._rawAsyncValidators)}},Bt=class extends Lt{constructor(e,t,r){super(Yr(t),Xr(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Do(this,!0,e),Object.keys(e).forEach(r=>{Oo(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let n=this.controls[r];n&&n.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,n)=>{r.reset(e?e[n]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,n)=>((r.enabled||this.disabled)&&(t[n]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((n,s)=>{r=t(r,n,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var bi=new Te("CallSetDisabledState",{providedIn:"root",factory:()=>Ei}),Ei="always";function Ao(i,e){return[...e.path,i]}function Kr(i,e,t=Ei){Jr(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Vo(i,e),No(i,e),Mo(i,e),To(i,e)}function Nr(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function To(i,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function Jr(i,e){let t=Eo(i);e.validator!==null?i.setValidators(Tr(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let r=xo(i);e.asyncValidator!==null?i.setAsyncValidators(Tr(r,e.asyncValidator)):typeof r=="function"&&i.setAsyncValidators([r]);let n=()=>i.updateValueAndValidity();Nr(e._rawValidators,n),Nr(e._rawAsyncValidators,n)}function Vo(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Qr(i,e)})}function Mo(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Qr(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function Qr(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function No(i,e){let t=(r,n)=>{e.valueAccessor.writeValue(r),n&&e.viewToModelUpdate(r)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function Fo(i,e){i==null,Jr(i,e)}function Io(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ro(i){return Object.getPrototypeOf(i.constructor)===mo}function Po(i,e){i._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Lo(i,e){if(!e)return null;Array.isArray(e);let t,r,n;return e.forEach(s=>{s.constructor===Ut?t=s:Ro(s)?r=s:n=s}),n||r||t||null}var Bo={provide:Fe,useExisting:kt(()=>xi)},et=Promise.resolve(),xi=(()=>{let e=class e extends Fe{constructor(r,n,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Je,this.form=new Bt({},vi(r),Ci(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){et.then(()=>{let n=this._findContainer(r.path);r.control=n.registerControl(r.name,r.control),Kr(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){et.then(()=>{let n=this._findContainer(r.path);n&&n.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){et.then(()=>{let n=this._findContainer(r.path),s=new Bt({});Fo(s,r),n.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){et.then(()=>{let n=this._findContainer(r.path);n&&n.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,n){et.then(()=>{this.form.get(r.path).setValue(n)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Po(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(n){return new(n||e)(w(Br,10),w(Ur,10),w(bi,8))},e.\u0275dir=se({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,s){n&1&&R("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[Ke.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Tt([Bo]),be]});let i=e;return i})();function Fr(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function Ir(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Uo=class extends Lt{constructor(e=null,t,r){super(Yr(t),Xr(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qt(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ir(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ir(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var qo={provide:tt,useExisting:kt(()=>wi)},Rr=Promise.resolve(),wi=(()=>{let e=class e extends tt{constructor(r,n,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Uo,this._registered=!1,this.name="",this.update=new Je,this._parent=r,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=Lo(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let n=r.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Io(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Kr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Rr.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let n=r.isDisabled.currentValue,s=n!==0&&br(n);Rr.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Ao(r,this._parent):[r]}};e.\u0275fac=function(n){return new(n||e)(w(Fe,9),w(Br,10),w(Ur,10),w(Lr,10),w(yr,8),w(bi,8))},e.\u0275dir=se({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ke.None,"disabled","isDisabled"],model:[Ke.None,"ngModel","model"],options:[Ke.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Tt([qo]),be,gr]});let i=e;return i})(),Zr=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=se({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})();var Go=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dt({type:e}),e.\u0275inj=Ot({});let i=e;return i})();var jo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dt({type:e}),e.\u0275inj=Ot({imports:[Go]});let i=e;return i})();var en=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:bi,useValue:r.callSetDisabledState??Ei}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dt({type:e}),e.\u0275inj=Ot({imports:[jo]});let i=e;return i})();var J=Object.create(null);J.open="0";J.close="1";J.ping="2";J.pong="3";J.message="4";J.upgrade="5";J.noop="6";var rt=Object.create(null);Object.keys(J).forEach(i=>{rt[J[i]]=i});var nt={type:"error",data:"parser error"};var st=({type:i,data:e},t,r)=>e instanceof ArrayBuffer||ArrayBuffer.isView(e)?r(t?e:"b"+tn(e,!0).toString("base64")):r(J[i]+(e||"")),tn=(i,e)=>Buffer.isBuffer(i)||i instanceof Uint8Array&&!e?i:i instanceof ArrayBuffer?Buffer.from(i):Buffer.from(i.buffer,i.byteOffset,i.byteLength),Si;function rn(i,e){if(i.data instanceof ArrayBuffer||ArrayBuffer.isView(i.data))return e(tn(i.data,!1));st(i,!0,t=>{Si||(Si=new TextEncoder),e(Si.encode(t))})}var ot=(i,e)=>{if(typeof i!="string")return{type:"message",data:nn(i,e)};let t=i.charAt(0);if(t==="b"){let r=Buffer.from(i.substring(1),"base64");return{type:"message",data:nn(r,e)}}return rt[t]?i.length>1?{type:rt[t],data:i.substring(1)}:{type:rt[t]}:nt},nn=(i,e)=>{switch(e){case"arraybuffer":return i instanceof ArrayBuffer?i:Buffer.isBuffer(i)?i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength):i.buffer;case"nodebuffer":default:return Buffer.isBuffer(i)?i:Buffer.from(i)}};var sn="",on=(i,e)=>{let t=i.length,r=new Array(t),n=0;i.forEach((s,o)=>{st(s,!1,a=>{r[o]=a,++n===t&&e(r.join(sn))})})},an=(i,e)=>{let t=i.split(sn),r=[];for(let n=0;n<t.length;n++){let s=ot(t[n],e);if(r.push(s),s.type==="error")break}return r};function cn(){return new TransformStream({transform(i,e){rn(i,t=>{let r=t.length,n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);let s=new DataView(n.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{n=new Uint8Array(9);let s=new DataView(n.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}i.data&&typeof i.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}var ki;function Gt(i){return i.reduce((e,t)=>e+t.length,0)}function jt(i,e){if(i[0].length===e)return i.shift();let t=new Uint8Array(e),r=0;for(let n=0;n<e;n++)t[n]=i[0][r++],r===i[0].length&&(i.shift(),r=0);return i.length&&r<i[0].length&&(i[0]=i[0].slice(r)),t}function ln(i,e){ki||(ki=new TextDecoder);let t=[],r=0,n=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(r===0){if(Gt(t)<1)break;let l=jt(t,1);s=(l[0]&128)===128,n=l[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(Gt(t)<2)break;let l=jt(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Gt(t)<8)break;let l=jt(t,8),u=new DataView(l.buffer,l.byteOffset,l.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(nt);break}n=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Gt(t)<n)break;let l=jt(t,n);a.enqueue(ot(s?l:ki.decode(l),e)),r=0}if(n===0||n>i){a.enqueue(nt);break}}}})}var Oi=4;function x(i){if(i)return Wo(i)}function Wo(i){for(var e in x.prototype)i[e]=x.prototype[e];return i}x.prototype.on=x.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};x.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};x.prototype.off=x.prototype.removeListener=x.prototype.removeAllListeners=x.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var r,n=0;n<t.length;n++)if(r=t[n],r===e||r.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+i],this};x.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,n=t.length;r<n;++r)t[r].apply(this,e)}return this};x.prototype.emitReserved=x.prototype.emit;x.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};x.prototype.hasListeners=function(i){return!!this.listeners(i).length};var Q=global;function Ht(i,...e){return e.reduce((t,r)=>(i.hasOwnProperty(r)&&(t[r]=i[r]),t),{})}var $o=Q.setTimeout,zo=Q.clearTimeout;function ce(i,e){e.useNativeTimers?(i.setTimeoutFn=$o.bind(Q),i.clearTimeoutFn=zo.bind(Q)):(i.setTimeoutFn=Q.setTimeout.bind(Q),i.clearTimeoutFn=Q.clearTimeout.bind(Q))}var Yo=1.33;function un(i){return typeof i=="string"?Xo(i):Math.ceil((i.byteLength||i.size)*Yo)}function Xo(i){let e=0,t=0;for(let r=0,n=i.length;r<n;r++)e=i.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}var xn=U(ee(),1);function bn(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function En(i){let e={},t=i.split("&");for(let r=0,n=t.length;r<n;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}var va=(0,xn.default)("engine.io-client:transport"),Xt=class extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}},le=class extends x{constructor(e){super(),this.writable=!1,ce(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new Xt(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):va("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=ot(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let t=bn(e);return t.length?"?"+t:""}};var Nn=U(ee(),1);var On="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Vi=64,Ca={},wn=0,Kt=0,Sn;function kn(i){let e="";do e=On[i%Vi]+e,i=Math.floor(i/Vi);while(i>0);return e}function Jt(){let i=kn(+new Date);return i!==Sn?(wn=0,Sn=i):i+"."+kn(wn++)}for(;Kt<Vi;Kt++)Ca[On[Kt]]=Kt;var Fi=U(Tn(),1),Ii=Fi.default||Fi;function Vn(){return new Ni}function Ea(i){let e=i.split("; "),t=e[0].indexOf("=");if(t===-1)return;let r=e[0].substring(0,t).trim();if(!r.length)return;let n=e[0].substring(t+1).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));let s={name:r,value:n};for(let o=1;o<e.length;o++){let a=e[o].split("=");if(a.length!==2)continue;let l=a[0].trim(),u=a[1].trim();switch(l){case"Expires":s.expires=new Date(u);break;case"Max-Age":let c=new Date;c.setUTCSeconds(c.getUTCSeconds()+parseInt(u,10)),s.expires=c;break;default:}}return s}var Ni=class{constructor(){this.cookies=new Map}parseCookies(e){let t=e.getResponseHeader("set-cookie");t&&t.forEach(r=>{let n=Ea(r);n&&this.cookies.set(n.name,n)})}addCookies(e){let t=[];this.cookies.forEach((r,n)=>{var s;((s=r.expires)===null||s===void 0?void 0:s.getTime())<Date.now()?this.cookies.delete(n):t.push(`${n}=${r.value}`)}),t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}};var H=(0,Nn.default)("engine.io-client:polling");function xa(){}var wa=function(){return new Ii({xdomain:!1}).responseType!=null}(),Zt=class extends le{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){let r=location.protocol==="https:",n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}let t=e&&e.forceBase64;this.supportsBinary=wa&&!t,this.opts.withCredentials&&(this.cookieJar=Vn())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let t=()=>{H("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(H("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){H("pre-pause polling complete"),--r||t()})),this.writable||(H("we are currently writing - waiting to pause"),r++,this.once("drain",function(){H("pre-pause writing complete"),--r||t()}))}else t()}poll(){H("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){H("polling got data %s",e);let t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};an(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():H('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{H("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(H("transport open - closing"),e()):(H("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,on(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Jt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Qt(this.uri(),e)}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){H("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}},Qt=(()=>{class i extends x{constructor(t,r){super(),ce(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;let r=Ht(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;let n=this.xhr=new Ii(r);try{H("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},H("xhr data %s",this.data),n.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=i.requestsCount++,i.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=xa,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Mn);else if(typeof addEventListener=="function"){let i="onpagehide"in Q?"pagehide":"unload";addEventListener(i,Mn,!1)}}function Mn(){for(let i in Qt.requests)Qt.requests.hasOwnProperty(i)&&Qt.requests[i].abort()}var Fc=U(Pn(),1),Ic=U(Hi(),1),Rc=U($i(),1),Is=U(Zi(),1),Pc=U(Fs(),1);var Rs=Is.default;var yt=Rs,li=!1,Ps="nodebuffer",Oe=process.nextTick;var Bs=U(ee(),1);var Lc=(0,Bs.default)("engine.io-client:websocket"),Ls=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",ui=class extends le{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),t=this.opts.protocols,r=Ls?{}:Ht(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=li&&!Ls?t?new yt(e,t):new yt(e):new yt(e,t,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;st(r,this.supportsBinary,s=>{let o={};li||(r.options&&(o.compress=r.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1));try{li?this.ws.send(s):this.ws.send(s,o)}catch{Lc("websocket closed before onclose event")}n&&Oe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!yt}};var Us=U(ee(),1),vt=(0,Us.default)("engine.io-client:webtransport"),hi=class extends le{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{vt("transport closed gracefully"),this.onClose()}).catch(e=>{vt("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let t=ln(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=cn();n.readable.pipeTo(e.writable),this.writer=n.writable.getWriter();let s=()=>{r.read().then(({done:a,value:l})=>{if(a){vt("session is closed");return}vt("received chunk: %o",l),this.onPacket(l),s()}).catch(a=>{vt("an error occurred while reading: %s",a)})};s();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;this.writer.write(r).then(()=>{n&&Oe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}};var tr={websocket:ui,webtransport:hi,polling:Zt};var Bc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Uc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function je(i){if(i.length>2e3)throw"URI too long";let e=i,t=i.indexOf("["),r=i.indexOf("]");t!=-1&&r!=-1&&(i=i.substring(0,t)+i.substring(t,r).replace(/:/g,";")+i.substring(r,i.length));let n=Bc.exec(i||""),s={},o=14;for(;o--;)s[Uc[o]]=n[o]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=qc(s,s.path),s.queryKey=Gc(s,s.query),s}function qc(i,e){let t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Gc(i,e){let t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,s){n&&(t[n]=s)}),t}var qs=U(ee(),1);var k=(0,qs.default)("engine.io-client:socket"),di=(()=>{class i extends x{constructor(t,r={}){super(),this.binaryType=Ps,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=je(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=je(r.host).host),ce(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=En(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){k('creating transport "%s"',t);let r=Object.assign({},this.opts.query);r.EIO=Oi,r.transport=t,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return k("options: %j",n),new tr[t](n)}open(){let t;if(this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(r){k("error while creating transport: %s",r),this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){k("setting transport %s",t.name),this.transport&&(k("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){k('probing transport "%s"',t);let r=this.createTransport(t),n=!1;i.priorWebsocketSuccess=!1;let s=()=>{n||(k('probe transport "%s" opened',t),r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(k('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;i.priorWebsocketSuccess=r.name==="websocket",k('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||this.readyState!=="closed"&&(k("changing transport and sending upgrade packet"),h(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{k('probe transport "%s" failed',t);let _=new Error("probe error");_.transport=r.name,this.emitReserved("upgradeError",_)}}))};function o(){n||(n=!0,h(),r.close(),r=null)}let a=f=>{let _=new Error("probe error: "+f);_.transport=r.name,o(),k('probe transport "%s" failed because of error: %s',t,f),this.emitReserved("upgradeError",_)};function l(){a("transport closed")}function u(){a("socket closed")}function c(f){r&&f.name!==r.name&&(k('"%s" works - aborting "%s"',f.name,r.name),o())}let h=()=>{r.removeListener("open",s),r.removeListener("error",a),r.removeListener("close",l),this.off("close",u),this.off("upgrading",c)};r.once("open",s),r.once("error",a),r.once("close",l),this.once("close",u),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(k("socket open"),this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){k("starting upgrade probes");let t=0,r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(k('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}else k('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();k("flushing %d packets in socket",t.length),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let s=this.writeBuffer[n].data;if(s&&(r+=un(s)),n>0&&r>this.maxPayload)return k("only send %d out of %d packets",n,this.writeBuffer.length),this.writeBuffer.slice(0,n);r+=2}return k("payload size is %d (max: %d)",r,this.maxPayload),this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:t,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){let t=()=>{this.onClose("forced close"),k("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){k("socket error %j",t),i.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(k('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let r=[],n=0,s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}return i.protocol=Oi,i})();var dh=di.protocol;var js=U(ee(),1),Gs=(0,js.default)("socket.io-client:url");function Hs(i,e="",t){let r=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(Gs("protocol-less url %s",i),typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),Gs("parse %s",i),r=je(i)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}var cr={};po(cr,{Decoder:()=>or,Encoder:()=>sr,PacketType:()=>g,protocol:()=>Ks});var jc=typeof ArrayBuffer=="function",Hc=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Ws=Object.prototype.toString,Wc=typeof Blob=="function"||typeof Blob<"u"&&Ws.call(Blob)==="[object BlobConstructor]",$c=typeof File=="function"||typeof File<"u"&&Ws.call(File)==="[object FileConstructor]";function bt(i){return jc&&(i instanceof ArrayBuffer||Hc(i))||Wc&&i instanceof Blob||$c&&i instanceof File}function Ct(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,r=i.length;t<r;t++)if(Ct(i[t]))return!0;return!1}if(bt(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return Ct(i.toJSON(),!0);for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&Ct(i[t]))return!0;return!1}function $s(i){let e=[],t=i.data,r=i;return r.data=ir(t,e),r.attachments=e.length,{packet:r,buffers:e}}function ir(i,e){if(!i)return i;if(bt(i)){let t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){let t=new Array(i.length);for(let r=0;r<i.length;r++)t[r]=ir(i[r],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){let t={};for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=ir(i[r],e));return t}return i}function zs(i,e){return i.data=rr(i.data,e),delete i.attachments,i}function rr(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=rr(i[t],e);else if(typeof i=="object")for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=rr(i[t],e));return i}var Xs=U(ee(),1),nr=(0,Xs.default)("socket.io-parser"),zc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ks=5,g=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(g||{}),sr=class{constructor(e){this.replacer=e}encode(e){return nr("encoding packet %j",e),(e.type===g.EVENT||e.type===g.ACK)&&Ct(e)?this.encodeAsBinary({type:e.type===g.EVENT?g.BINARY_EVENT:g.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===g.BINARY_EVENT||e.type===g.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),nr("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=$s(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}};function Ys(i){return Object.prototype.toString.call(i)==="[object Object]"}var or=class i extends x{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let r=t.type===g.BINARY_EVENT;r||t.type===g.BINARY_ACK?(t.type=r?g.EVENT:g.ACK,this.reconstructor=new ar(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(bt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(g[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===g.BINARY_EVENT||r.type===g.BINARY_ACK){let s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);let o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){let s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";let n=e.charAt(t+1);if(n!==""&&Number(n)==n){let s=t+1;for(;++t;){let o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){let s=this.tryParse(e.substr(t));if(i.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return nr("decoded %s as %j",e,r),r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case g.CONNECT:return Ys(t);case g.DISCONNECT:return t===void 0;case g.CONNECT_ERROR:return typeof t=="string"||Ys(t);case g.EVENT:case g.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&zc.indexOf(t[0])===-1);case g.ACK:case g.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},ar=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let t=zs(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Y(i,e,t){return i.on(e,t),function(){i.off(e,t)}}var Js=U(ee(),1),F=(0,Js.default)("socket.io-client:socket"),Yc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),He=class extends x{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[Y(e,"open",this.onopen.bind(this)),Y(e,"packet",this.onpacket.bind(this)),Y(e,"error",this.onerror.bind(this)),Y(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Yc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let r={type:g.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){let o=this.ids++;F("emitting packet with ack id %d",o);let a=t.pop();this._registerAckCallback(o,a),r.id=o}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?F("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r),this.flags={},this}_registerAckCallback(e,t){var r;let n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&(F("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(o,1));F("event with ack id %d has timed out after %d ms",e,n),t.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),t.apply(this,[null,...o])}}emitWithAck(e,...t){let r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,s)=>{t.push((o,a)=>r?o?s(o):n(a):n(o)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...s)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(F("packet [%d] is discarded after %d tries",r.id,r.tryCount),this._queue.shift(),t&&t(n)):(F("packet [%d] was successfully sent",r.id),this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(F("draining queue"),!this.connected||this._queue.length===0)return;let t=this._queue[0];if(t.pending&&!e){F("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,F("sending packet [%d] (try n\xB0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){F("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:g.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){F("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case g.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case g.EVENT:case g.BINARY_EVENT:this.onevent(e);break;case g.ACK:case g.BINARY_ACK:this.onack(e);break;case g.DISCONNECT:this.ondisconnect();break;case g.CONNECT_ERROR:this.destroy();let r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){let t=e.data||[];F("emitting event %j",t),e.id!=null&&(F("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,F("sending ack %j",n),t.packet({type:g.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];typeof t=="function"?(F("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):F("bad ack %s",e.id)}onconnect(e,t){F("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){F("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(F("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let r of t)r.apply(this,e.data)}}};function De(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}De.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};De.prototype.reset=function(){this.attempts=0};De.prototype.setMin=function(i){this.ms=i};De.prototype.setMax=function(i){this.max=i};De.prototype.setJitter=function(i){this.jitter=i};var Qs=U(ee(),1),L=(0,Qs.default)("socket.io-client:manager"),We=class extends x{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ce(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new De({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||cr;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(L("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;L("opening %s",this.uri),this.engine=new di(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=Y(t,"open",function(){r.onopen(),e&&e()}),s=a=>{L("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Y(t,"error",s);if(this._timeout!==!1){let a=this._timeout;L("connect attempt will timeout after %d",a);let l=this.setTimeoutFn(()=>{L("connect attempt timed out after %d",a),n(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){L("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(Y(e,"ping",this.onping.bind(this)),Y(e,"data",this.ondata.bind(this)),Y(e,"error",this.onerror.bind(this)),Y(e,"close",this.onclose.bind(this)),Y(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Oe(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){L("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new He(this,e,t),this.nsps[e]=r),r}_destroy(e){let t=Object.keys(this.nsps);for(let r of t)if(this.nsps[r].active){L("socket %s is still active, skipping close",r);return}this._close()}_packet(e){L("writing packet %j",e);let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){L("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){L("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){L("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)L("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();L("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let r=this.setTimeoutFn(()=>{e.skipReconnect||(L("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(L("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):(L("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var eo=U(ee(),1),Zs=(0,eo.default)("socket.io-client"),Et={};function xt(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};let t=Hs(i,e.path||"/socket.io"),r=t.source,n=t.id,s=t.path,o=Et[n]&&s in Et[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o,l;return a?(Zs("ignoring socket cache for %s",r),l=new We(r,e)):(Et[n]||(Zs("new io instance for %s",r),Et[n]=new We(r,e)),l=Et[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(xt,{Manager:We,Socket:He,io:xt,connect:xt});var $e=(()=>{let e=class e{constructor(){this.GameRunning=!1,this.currentPlayer="X",this.turnCount=0,this.board=[],this.Notouch=!0,this.GameFinish=!1,this.winner=!1,this.loser=!1,this.draw=!1,this.waiting=!0,this.userLeft=!1,this.searchbox=!1,this.roomFull=!1,this.createBoard()}newGame(){this.Notouch=!0,this.turnCount=0,this.socket.emit("clicked",{board:this.board,roomId:this.roomId}),this.socket.emit("newGame",this.roomId)}update(){this.socket.on("getRooms",r=>{console.log(r),this.rooms=r}),this.socket.on("updateBoard",r=>{this.Notouch=!1,this.currentPlayer=this.currentPlayer=="X"?"O":"X",this.board=r}),this.socket.on("start",r=>{for(let n=0;n<9;n++)this.board[n].state=null;this.turnCount=0,this.draw=!1,this.waiting=!1,this.userLeft=!1,this.currentPlayer="X",this.winner=!1,this.loser=!1,this.GameFinish=!1,this.socket.id==r?this.Notouch=!0:this.Notouch=!1}),this.socket.on("youLose",()=>{this.loser=!0,this.GameFinish=!0,this.Notouch=!0}),this.socket.on("userLeft",()=>{this.userLeft=!0,this.waiting=!0}),this.socket.on("noWinner",()=>{this.draw=!0,this.GameFinish=!0}),this.socket.on("roomFull",()=>{this.roomFull=!0}),this.socket.on("startNew",()=>{this.socket.emit("newGame",this.roomId)})}createBoard(){for(let r=0;r<9;r++)this.board.push({id:r,state:null})}changePlayer(r){this.board[r.id].state==null&&(this.turnCount+=1,this.turnCount==5&&this.socket.emit("draw",this.roomId),this.Notouch=!0,this.board[r.id].state=this.currentPlayer,this.currentPlayer=this.currentPlayer=="X"?"O":"X",this.socket.emit("clicked",{board:this.board,roomId:this.roomId}),this.GameFinish=this.checkBoard(this.board),this.GameFinish&&this.finishGame())}connect(){this.socket||(this.socket=xt("https://tic-tac-toe-game-dev-hker.1.us-1.fl0.io",{transports:["websocket"]})),this.update()}search(){this.connect(),this.socket.emit("search"),this.searchbox=!0}joinroom(){this.url=window.location.href,this.username=this.url.split("?")[1].split("&")[0].split("=")[1].replace("%20"," "),this.roomId=this.url.split("?")[1].split("&")[1].split("=")[1],this.connect(),this.socket.emit("join",this.roomId)}checkBoard(r){let n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let s of n){let o=r[s[0]].state;if(o!==null&&o===r[s[1]].state&&o===r[s[2]].state)return!0}return!1}finishGame(){this.GameFinish=!0,this.winner=!0,this.socket.emit("finishGame",this.roomId)}leaveRoom(){this.socket.emit("leaveRoom",this.roomId)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=fi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Jc(i,e){if(i&1){let t=Ve();y(0,"div")(1,"form",12),R("ngSubmit",function(){let s=ve(t).$implicit,o=ae(2);return Ce(o.joinRoom(s))}),y(2,"button",13),S(3),b()()()}if(i&2){let t=e.$implicit;T(3),At(t)}}function Qc(i,e){if(i&1){let t=Ve();y(0,"div",8)(1,"button",9),R("click",function(){ve(t);let n=ae();return Ce(n.cancelSearch())}),S(2,"X"),b(),oe(3,Jc,4,1,"div",10),y(4,"button",11),R("click",function(){ve(t);let n=ae();return Ce(n.gameService.search())}),S(5,"Refresh"),b()()}if(i&2){let t=ae();T(3),I("ngForOf",t.gameService.rooms)}}var to=(()=>{let e=class e{constructor(r,n){this.router=r,this.gameService=n,this.data={username:"",roomId:""}}cancelSearch(){this.gameService.searchbox=!1}createRoom(){this.data.roomId!=""&&this.router.navigate(["/board"],{queryParams:{name:this.data.username,roomId:this.data.roomId}})}joinRoom(r){this.router.navigate(["/board"],{queryParams:{name:"user",roomId:r}})}};e.\u0275fac=function(n){return new(n||e)(w(Nt),w($e))},e.\u0275cmp=pe({type:e,selectors:[["app-home"]],standalone:!0,features:[me],decls:19,vars:3,consts:[[1,"title"],[1,"userForm"],[1,"createForm",3,"ngSubmit"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","text","name","roomId",3,"ngModel","ngModelChange"],["type","submit"],[3,"click"],["class","search",4,"ngIf"],[1,"search"],[1,"close",3,"click"],[4,"ngFor","ngForOf"],[1,"inner-search",3,"click"],[3,"ngSubmit"],[1,"roomsbtn"]],template:function(n,s){n&1&&(y(0,"p",0),S(1,"TIC-TAC-TOE"),b(),y(2,"div",1)(3,"form",2),R("ngSubmit",function(){return s.createRoom()}),y(4,"label"),S(5,"Username"),b(),y(6,"input",3),R("ngModelChange",function(a){return s.data.username=a}),b(),Ee(7,"br"),y(8,"label"),S(9,"Room ID"),b(),y(10,"input",4),R("ngModelChange",function(a){return s.data.roomId=a}),b(),Ee(11,"br"),y(12,"button",5),S(13,"Create Room"),b()(),y(14,"p"),S(15,"or"),b(),y(16,"button",6),R("click",function(){return s.gameService.search()}),S(17,"Search Rooms"),b()(),oe(18,Qc,6,1,"div",7)),n&2&&(T(6),I("ngModel",s.data.username),T(4),I("ngModel",s.data.roomId),T(8),I("ngIf",s.gameService.searchbox))},dependencies:[en,Zr,Ut,$r,zr,wi,xi,Me,Vt,Mt],styles:[".search[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;position:absolute;padding:50px;inset:0;margin:auto;box-shadow:1px 1px 3px #00000080;background-color:#f6f5f5;height:50%;width:75%;border-radius:20px}.close[_ngcontent-%COMP%]{position:absolute;right:30px;width:2rem;height:2rem;padding:10px 10px 25px}.roomsbtn[_ngcontent-%COMP%]{min-width:fit-content;margin:25px}.inner-search[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:fit-content;height:fit-content;padding:15px;left:0;right:0;margin:auto}.userForm[_ngcontent-%COMP%]{position:absolute;padding:50px;inset:0;margin:auto;width:30vw;height:60vh;border-radius:10px;box-shadow:1px 1px 3px #00000080;background-color:#e1e9f2cf}.createForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-items:left;font-size:1.6rem}input[_ngcontent-%COMP%]{border:none;box-shadow:1px 1px 3px #00000080,-1px -1px 3px #00000080;height:3rem;border-radius:10px;font-size:large}button[_ngcontent-%COMP%]{width:50%;margin-bottom:2em;color:#fff;border:none;background-color:#277af6;padding:15px;border-radius:10px;cursor:pointer;margin-left:25%}button[_ngcontent-%COMP%]:active{background-color:#0f39d2}p[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{margin-top:0;font-size:3.5rem}@media only screen and (max-width:720px){.userForm[_ngcontent-%COMP%]{width:65vw;padding-bottom:100px;top:100px}button[_ngcontent-%COMP%]{margin-bottom:1em}.title[_ngcontent-%COMP%]{font-size:2rem}.search[_ngcontent-%COMP%]{width:65%}}"]});let i=e;return i})();var io=(()=>{let e=class e{constructor(){this.title="tic-tac-toe"}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=pe({type:e,selectors:[["app-root"]],standalone:!0,features:[me],decls:1,vars:0,template:function(n,s){n&1&&Ee(0,"router-outlet")},dependencies:[Me,Dr]});let i=e;return i})();var ro=(()=>{let e=class e{constructor(r){this.gameService=r}};e.\u0275fac=function(n){return new(n||e)(w($e))},e.\u0275cmp=pe({type:e,selectors:[["app-sqaure"]],inputs:{box:"box"},standalone:!0,features:[me],decls:3,vars:1,consts:[[1,"box",3,"click"]],template:function(n,s){n&1&&(y(0,"div",0),R("click",function(){return s.gameService.changePlayer(s.box)}),y(1,"p"),S(2),b()()),n&2&&(T(2),At(s.box.state))},styles:[".box[_ngcontent-%COMP%]{width:50px;height:50px;box-shadow:1px 1px 5px #1207aa59;border-radius:5px;margin:3px;font-size:1.5rem;padding:1.5rem;background-color:#fff;text-align:center}p[_ngcontent-%COMP%]{margin-top:-15px;font-size:3.7rem;color:navy}"]});let i=e;return i})();function Zc(i,e){i&1&&(y(0,"p",7),S(1,"Your Turn"),b())}function el(i,e){i&1&&(y(0,"p",7),S(1,"Opponent's Turn"),b())}function tl(i,e){if(i&1&&(y(0,"div"),Ee(1,"app-sqaure",8),b()),i&2){let t=e.$implicit;T(),I("box",t)}}function il(i,e){i&1&&(y(0,"p"),S(1,"Player Left!!"),b())}function rl(i,e){i&1&&(y(0,"p"),S(1,"Waiting for another Player"),b())}function nl(i,e){if(i&1){let t=Ve();y(0,"div",9)(1,"p"),S(2,"Sorry Room Already Full"),b(),y(3,"button",6),R("click",function(){ve(t);let n=ae();return Ce(n.goBack())}),S(4,"Home"),b()()}}function sl(i,e){i&1&&(y(0,"p"),S(1,"YOU WON !!! \u{1F451}"),b())}function ol(i,e){i&1&&(y(0,"p"),S(1,"YOU LOSE !!! \u{1F44E}\u{1F3FE}"),b())}function al(i,e){i&1&&(y(0,"p"),S(1,"It's a Draw \u{1F611}"),b())}function cl(i,e){if(i&1){let t=Ve();y(0,"div")(1,"div",9),oe(2,sl,2,0,"p",4)(3,ol,2,0,"p",4)(4,al,2,0,"p",4),y(5,"button",10),R("click",function(){ve(t);let n=ae();return Ce(n.gameService.newGame())}),S(6,"New Game"),b()()()}if(i&2){let t=ae();T(2),I("ngIf",t.gameService.winner),T(),I("ngIf",t.gameService.loser),T(),I("ngIf",t.gameService.draw)}}var ll=i=>({notouch:i}),no=(()=>{let e=class e{constructor(r,n){this.gameService=r,this.router=n}ngOnInit(){this.gameService.joinroom(),this.router.events.subscribe(r=>{r instanceof Or&&(this.gameService.roomFull||(this.gameService.leaveRoom(),this.gameService.rooms=[]))})}goBack(){this.gameService.roomFull=!1,this.router.navigate(["/"])}};e.\u0275fac=function(n){return new(n||e)(w($e),w(Nt))},e.\u0275cmp=pe({type:e,selectors:[["app-board"]],standalone:!0,features:[me],decls:11,vars:10,consts:[["class","heading",4,"ngIf"],[1,"board",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"waiting"],[4,"ngIf"],["class","result",4,"ngIf"],[1,"goBack",3,"click"],[1,"heading"],[3,"box"],[1,"result"],[1,"ngbtn",3,"click"]],template:function(n,s){n&1&&(oe(0,Zc,2,0,"p",0)(1,el,2,0,"p",0),y(2,"div",1),oe(3,tl,2,1,"div",2),b(),y(4,"div",3),oe(5,il,2,0,"p",4)(6,rl,2,0,"p",4),b(),oe(7,nl,5,0,"div",5)(8,cl,7,3,"div",4),y(9,"button",6),R("click",function(){return s.goBack()}),S(10,"Leave Room"),b()),n&2&&(I("ngIf",!s.gameService.Notouch),T(),I("ngIf",s.gameService.Notouch),T(),I("ngClass",Cr(8,ll,s.gameService.Notouch)),T(),I("ngForOf",s.gameService.board),T(2),I("ngIf",s.gameService.userLeft),T(),I("ngIf",s.gameService.waiting),T(),I("ngIf",s.gameService.roomFull),T(),I("ngIf",s.gameService.GameFinish))},dependencies:[ro,Me,xr,Vt,Mt],styles:[".board[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;display:grid;grid-template-columns:repeat(3,1fr);max-width:fit-content;max-height:fit-content;height:-moz-max-content;padding:5px;border-radius:10px;box-shadow:1px 1px 5px #0000004d;background-color:#e5e3e39e}.heading[_ngcontent-%COMP%]{text-align:center;margin-top:40px;font-size:3rem;margin-bottom:10px}.notouch[_ngcontent-%COMP%]{pointer-events:none}.result[_ngcontent-%COMP%]{font-size:3.5rem;position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;inset:0;margin:auto;width:60vw;height:40vh;border-radius:30px;box-shadow:1px 1px 20px #0003;background-color:#fff}.ngbtn[_ngcontent-%COMP%], .goBack[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#277af6;padding:15px;border-radius:10px;cursor:pointer}.ngbtn[_ngcontent-%COMP%]:active, .goBack[_ngcontent-%COMP%]:active{background-color:#0f39d2}.waiting[_ngcontent-%COMP%]{text-align:center}.goBack[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%)}@media only screen and (max-width:720px){.result[_ngcontent-%COMP%]{width:90vw;font-size:2rem}.heading[_ngcontent-%COMP%]{font-size:2rem}}"]});let i=e;return i})();var so=[{path:"",component:to},{path:"board",component:no}];var oo={providers:[Ar(so),Sr()]};var ul={providers:[kr()]},ao=Er(oo,ul);var hl=()=>wr(io,ao),Cd=hl;export{Cd as a};
